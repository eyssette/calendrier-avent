function handleCalendar(){const n=document.querySelectorAll(".day"),t=(new Date).getDate();function e(){n.forEach((n=>{n.querySelector(".dayContent").style.display="none",n.classList.remove("active")}))}n.forEach((n=>{const o=n.querySelector("h2+p"),s=n.querySelector(".dayContent"),a=parseInt(n.id.split("-")[1],10);a<t&&(n.classList.add("pastDate"),2==o.children.length&&o.children[0].remove()),a>t&&n.classList.add("futureDate");const r=n.querySelector(".closeButton");n.addEventListener("click",(function(t){e(),n.classList.contains("futureDate")&&(s.children[1].innerHTML="Ce n'est pas encore le bon jour, merci de patienter !"),s.style.display="block",n.classList.add("active"),t.stopPropagation()})),document.addEventListener("click",(function(){e()})),document.addEventListener("keydown",(function(n){"Escape"===n.key&&e()})),r.addEventListener("click",(function(n){e()})),s.addEventListener("click",(function(n){n.stopPropagation()}))}))}const defaultCalendar="# Mon calendrier de l'Avent\n\n> Ce site vous permet de créer un calendrier de l'Avent personnalisé\n> \n> 1. Créez un fichier sur CodiMD ou sur une forge.\n> 2. Ce fichier doit comporter : un titre, un bloc de citation qui constituera le message initial, ainsi que pour chaque jour un titre, au moins une image et du contenu qui s'affichera quand on clique dessus. Vous pouvez récupérer [ce modèle](https://codimd.apps.education.fr/-PbI3GizQo6xV-TEiU1-sA?both). \n> 3. Votre calendrier de l'avent sera alors disponible à l'adresse : https://eyssette.forge.apps.education.fr/calendrier-avent#URL (en remplaçant URL par l'URL de votre fichier).\n> 4. Il est possible de cacher l'URL de votre fichier avec : https://eyssette.forge.apps.education.fr/calendrier-avent?c=1#URL (l'URL doit être encodée avec base64)\n\n## 1\n![](img/johnny_automatic_Christmas_Tree_1.png) ![](https://picsum.photos/200?random=1)\n\nContenu jour 1\n\n## 2\n![](img/ralexandrec_Christmas_Ball.png) ![](https://picsum.photos/200?random=2)\n\nContenu jour 2\n\n## 3\n![](img/nicubunu_Christmas_Candy.png) ![](https://picsum.photos/200?random=3)\n\nContenu jour 3\n\n## 4\n![](img/secretlondon_chocolate_present.png) ![](https://picsum.photos/200?random=4)\n\nContenu jour 4\n\n## 5\n![](img/xmas03.png) ![](https://picsum.photos/200?random=5)\n\nContenu jour 5\n\n## 6\n![](img/harmonic_Tree.png) ![](https://picsum.photos/200?random=6)\n\nContenu jour 6\n\n## 7\n![](img/oak-tree-covered-in-snow.png) ![](https://picsum.photos/200?random=7)\n\nContenu jour 7\n\n## 8\n![](img/1542274483.png) ![](https://picsum.photos/200?random=8)\n\nContenu jour 8\n\n## 9\n![](img/johnny_automatic_Christmas_Tree_1.png) ![](https://picsum.photos/200?random=9)\n\nContenu jour 9\n\n## 10\n![](img/ralexandrec_Christmas_Ball.png) ![](https://picsum.photos/200?random=10)\n\nContenu jour 10\n\n## 11\n![](img/nicubunu_Christmas_Candy.png) ![](https://picsum.photos/200?random=11)\n\nContenu jour 11\n\n## 12\n![](img/secretlondon_chocolate_present.png) ![](https://picsum.photos/200?random=12)\n\nContenu jour 12\n\n## 13\n![](img/xmas03.png) ![](https://picsum.photos/200?random=13)\n\nContenu jour 13\n\n## 14\n![](img/harmonic_Tree.png) ![](https://picsum.photos/200?random=14)\n\nContenu jour 14\n\n## 15\n![](img/oak-tree-covered-in-snow.png) ![](https://picsum.photos/200?random=15)\n\nContenu jour 15\n\n## 16\n![](img/1542274483.png) ![](https://picsum.photos/200?random=16)\n\nContenu jour 16\n\n## 17\n![](img/johnny_automatic_Christmas_Tree_1.png) ![](https://picsum.photos/200?random=17)\n\nContenu jour 17\n\n## 18\n![](img/ralexandrec_Christmas_Ball.png) ![](https://picsum.photos/200?random=18)\n\nContenu jour 18\n\n## 19\n![](img/nicubunu_Christmas_Candy.png) ![](https://picsum.photos/200?random=19)\n\nContenu jour 19\n\n## 20\n![](img/secretlondon_chocolate_present.png) ![](https://picsum.photos/200?random=20)\n\nContenu jour 20\n\n## 21\n![](img/xmas03.png) ![](https://picsum.photos/200?random=21)\n\nContenu jour 21\n\n## 22\n![](img/harmonic_Tree.png) ![](https://picsum.photos/200?random=22)\n\nContenu jour 22\n\n## 23\n![](img/oak-tree-covered-in-snow.png) ![](https://picsum.photos/200?random=23)\n\nContenu jour 23\n\n## 24\n![](img/1542274483.png) ![](https://picsum.photos/200?random=24)\n\nContenu jour 24\n\n## 25\n![](img/johnny_automatic_Christmas_Tree_1.png) ![](https://picsum.photos/200?random=25)\n\nContenu jour \t25\n\n## 26\n![](img/ralexandrec_Christmas_Ball.png) ![](https://picsum.photos/200?random=26)\n\nContenu jour 26\n\n## 27\n![](img/nicubunu_Christmas_Candy.png) ![](https://picsum.photos/200?random=27)\n\nContenu jour 27\n\n## 28\n![](img/secretlondon_chocolate_present.png) ![](https://picsum.photos/200?random=28)\n\nContenu jour 28\n\n## 29\n![](img/xmas03.png) ![](https://picsum.photos/200?random=29)\n\nContenu jour 29\n\n## 30\n![](img/harmonic_Tree.png) ![](https://picsum.photos/200?random=30)\n\nContenu jour 30\n\n## 31\n![](img/oak-tree-covered-in-snow.png) ![](https://picsum.photos/200?random=31)\n\nContenu jour 31\n";let md=defaultCalendar;const shortcuts=[["mycalendar","URL"]];function getMarkdownContent(){let n=window.location.hash.substring(1);1==new URLSearchParams(document.location.search).get("c")&&(n=atob(n)),""!==n?(n.startsWith("https://github.com")&&(n=n.replace("https://github.com","https://raw.githubusercontent.com"),n=n.replace("/blob/","/")),n.startsWith("https://codimd")&&-1===n.indexOf("download")&&(n=n.replace("?edit","").replace("?both","").replace("?view","").replace(/#$/,"")+"/download"),shortcut=shortcuts.find((t=>t[0]==n)),shortcut&&(n=shortcut[1]),fetch(n).then((n=>n.text())).then((n=>{md=n,calendarData=parseMarkdown(md),createCalendar(calendarData)})).catch((n=>{calendarData=parseMarkdown(defaultCalendar),createCalendar(calendarData),alert("Il y a une erreur dans l'URL. Merci de la vérifier et de vous assurer que le fichier est bien accessible.")}))):(calendarData=parseMarkdown(md),createCalendar(calendarData))}function parseMarkdown(n){const t=n.split("\n");let e=[],o="Mon calendrier de l'Avent",s=!1,a=[],r=[];const i=new showdown.Converter({emoji:!0,parseImgDimensions:!0,simplifiedAutoLink:!0});function c(n){let t=i.makeHtml(n);return t=t.replaceAll("<img ",'<img loading="lazy" '),t}const u=t.length;let p=!1,d=1;for(let n=0;n<u;n++){let e=t[n];const i=n===u-1;e.startsWith("# ")?o=e.replace("# ","").trim():e.startsWith(">")&&!s?(e=e.replace(/^>\s?/,"").trim(),a.push(e)):(e.startsWith("## ")&&(e=s?'</section></section></section>\n\n<section markdown class="day" id="day-'+d+'">'+e:'\n<section markdown class="day" id="day-'+d+'">\n\n'+e,s=!0,p=!1,d++),e.startsWith("![")&&!p&&(e+='\n\n<section markdown class="dayContent"><button class="closeButton">X</button><section markdown class="content">',p=!0),e=i?e+"</section></section></section>":e,r.push(e))}return e=[o,c(a.join("\n")),c(r.join("\n"))],e}function createCalendar(n){const t=document.getElementById("title"),e=document.getElementById("initial-message"),o=document.getElementById("calendar");title=n[0],initialMessage=n[1],calendar=n[2],t.innerHTML=title,initialMessage.length>0?(e.innerHTML=initialMessage,e.style.visibility="visible"):e.style.display="none",o.innerHTML=calendar,handleCalendar()}getMarkdownContent();